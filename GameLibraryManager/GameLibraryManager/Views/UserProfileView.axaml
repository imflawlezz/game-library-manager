<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:GameLibraryManager.ViewModels"
             xmlns:i="https://github.com/projektanker/icons.avalonia"
             x:Class="GameLibraryManager.Views.UserProfileView"
             x:DataType="vm:UserProfileViewModel">
    
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Panel HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,0,40">
            <Border Background="#161B22"
                    CornerRadius="12"
                    Width="440"
                    Padding="28"
                    BorderBrush="#30363D"
                    BorderThickness="1"
                    BoxShadow="0 16 32 0 #60000000">
                <StackPanel Spacing="20">
                    
                    <TextBlock Text="Edit Profile"
                               FontSize="20"
                               FontWeight="SemiBold"
                               Foreground="#F0F6FC"/>
                    
                    <StackPanel Spacing="16">
                        
                        <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto">
                            <Border Grid.Column="0"
                                    Width="64" Height="64"
                                    CornerRadius="32"
                                    Background="#30363D"
                                    ClipToBounds="True"
                                    Margin="0,0,16,0"
                                    VerticalAlignment="Top">
                                <Panel>
                                    <Border Background="#58A6FF"
                                            IsVisible="{Binding ProfileImageURL, Converter={x:Static StringConverters.IsNullOrEmpty}}">
                                        <i:Icon Value="fa-solid fa-user" 
                                                FontSize="28"
                                                Foreground="#0D1117"
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Center"/>
                                    </Border>
                                    <Image Source="{Binding ProfileImageURL, Converter={StaticResource ImageUrlConverter}}"
                                           Stretch="UniformToFill"
                                           IsVisible="{Binding ProfileImageURL, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
                                </Panel>
                            </Border>
                            
                            <StackPanel Grid.Column="1" Spacing="8" VerticalAlignment="Center">
                                <TextBlock Text="Profile Image URL"
                                           FontSize="13"
                                           FontWeight="Medium"
                                           Foreground="#8B949E"/>
                                <TextBox Text="{Binding ProfileImageURL}"
                                         Watermark="https://example.com/avatar.png">
                                    <TextBox.InnerLeftContent>
                                        <i:Icon Value="fa-solid fa-image" 
                                                FontSize="14"
                                                Foreground="#6E7681"
                                                Margin="10,0,0,0"/>
                                    </TextBox.InnerLeftContent>
                                </TextBox>
                            </StackPanel>
                        </Grid>
                        
                        <StackPanel Spacing="8">
                            <TextBlock Text="Email"
                                       FontSize="13"
                                       FontWeight="Medium"
                                       Foreground="#8B949E"/>
                            <TextBox Text="{Binding Email}"
                                     IsEnabled="False"
                                     Watermark="Email address">
                                <TextBox.InnerLeftContent>
                                    <i:Icon Value="fa-solid fa-envelope" 
                                            FontSize="14"
                                            Foreground="#6E7681"
                                            Margin="10,0,0,0"/>
                                </TextBox.InnerLeftContent>
                            </TextBox>
                        </StackPanel>
                        
                        <StackPanel Spacing="8">
                            <TextBlock Text="Username"
                                       FontSize="13"
                                       FontWeight="Medium"
                                       Foreground="#8B949E"/>
                            <TextBox Text="{Binding Username}"
                                     Watermark="Enter username">
                                <TextBox.InnerLeftContent>
                                    <i:Icon Value="fa-solid fa-user" 
                                            FontSize="14"
                                            Foreground="#6E7681"
                                            Margin="10,0,0,0"/>
                                </TextBox.InnerLeftContent>
                            </TextBox>
                        </StackPanel>
                        
                        <StackPanel Spacing="8">
                            <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                                <TextBlock Text="{Binding PasswordLabel}"
                                           FontSize="13"
                                           FontWeight="Medium"
                                           Foreground="#8B949E"/>
                                <TextBlock Text="{Binding PasswordHint}"
                                           FontSize="12"
                                           Foreground="#6E7681"
                                           VerticalAlignment="Center"/>
                            </StackPanel>
                            <TextBox Text="{Binding NewPassword}"
                                     PasswordChar="â€¢"
                                     Watermark="Enter new password">
                                <TextBox.InnerLeftContent>
                                    <i:Icon Value="fa-solid fa-lock" 
                                            FontSize="14"
                                            Foreground="#6E7681"
                                            Margin="10,0,0,0"/>
                                </TextBox.InnerLeftContent>
                            </TextBox>
                        </StackPanel>
                    </StackPanel>
                    
                    <Grid ColumnDefinitions="*,Auto,Auto" Margin="0,8,0,0">
                        <Button Grid.Column="1"
                                Command="{Binding CancelCommand}"
                                Content="Cancel"
                                Margin="0,0,12,0"
                                MinWidth="100"
                                Height="40"/>
                        <Button Grid.Column="2"
                                Command="{Binding SaveProfileCommand}"
                                Classes="primary"
                                MinWidth="140"
                                Height="40"
                                IsEnabled="{Binding !IsLoading}">
                            <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Center">
                                <i:Icon Value="fa-solid fa-check" FontSize="14" IsVisible="{Binding !IsLoading}"/>
                                <TextBlock Text="Save Changes" 
                                           FontWeight="Medium"
                                           VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </Grid>
                    
                    <ProgressBar IsIndeterminate="True"
                                 IsVisible="{Binding IsLoading}"
                                 Height="4"
                                 MinHeight="4"
                                 Margin="0,8,0,0"/>
                </StackPanel>
            </Border>
        </Panel>
    </ScrollViewer>
</UserControl>
